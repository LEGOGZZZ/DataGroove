<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DataGroove - Le Retour du Vinyle</title>
  <link rel="stylesheet" href="style.css">
  <link rel="shortcut icon" href="img/icone.png" type="image/x-icon">
</head>
<body>

  <!-- SECTION 0 : Logo seul au chargement -->
  <section id="intro">
    <img src="img/logo.png" alt="Logo DataGroove" class="logo-intro">
  </section>

  <!-- SECTION 1 : Accueil avec texte + vinyle à gauche -->
  <section id="accueil">
    <img src="img/logo.png" alt="Logo DataGroove" class="logo-small">

    <div class="accueil-content">
      <img src="img/icone.png" alt="Vinyle qui tourne" class="vinyle-anim">
      <p class="texte-accueil">
        Dans une ère où le streaming écrase toute la concurrence, la manière de consommer la musique évolue constamment. <br><br>
        Pourtant, un format iconique résiste, traverse les décennies et revient sur le devant de la scène : le vinyle. <br><br>
        <strong>DataGroove explore, en données et en courbes, l’histoire fascinante du disque vinyle.</strong><br><br>
        Chaque courbe trace une note, chaque année compose une mélodie, laissez les chiffres chanter l’histoire du vinyle.
      </p>
    </div>
  </section>

 <section id="france" class="section">
  <div class="container">
    <h2>Le Retour du Vinyle en France</h2>
    <div class="graph-container" style="position:relative;">
      <svg id="svg-vinyle" viewBox="0 0 650 400" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Graphique de l'évolution des ventes de vinyles en France" style="z-index:2; position:relative;">
        <!-- Axes -->
        <line x1="70" y1="340" x2="620" y2="340" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
        <line x1="70" y1="60" x2="70" y2="340" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
        <!-- Graduation axe Y -->
        <g stroke="rgba(255,255,255,0.5)" stroke-width="1" font-size="12" fill="#ddd">
          <line x1="65" y1="340" x2="70" y2="340"/><text x="40" y="345">0M</text>
          <line x1="65" y1="290" x2="70" y2="290"/><text x="40" y="295">1M</text>
          <line x1="65" y1="240" x2="70" y2="240"/><text x="40" y="245">2M</text>
          <line x1="65" y1="190" x2="70" y2="190"/><text x="40" y="195">3M</text>
          <line x1="65" y1="140" x2="70" y2="140"/><text x="40" y="145">4M</text>
          <line x1="65" y1="90"  x2="70" y2="90"/><text x="40" y="95">5M</text>
        </g>
        <!-- Courbe -->
        <polyline 
          fill="none" 
          stroke="#e84545"
          stroke-width="5" 
          points="70,330 170,315 220,287 320,245 470,175 600,162"
          style="filter: drop-shadow(0px 3px 7px #af2929);"
        />
        <!-- Points interactifs -->
        <g id="grp-points">
          <circle class="graph-point" data-idx="0" cx="70" cy="330" r="10" fill="#fff" cursor="pointer"/>
          <circle class="graph-point" data-idx="1" cx="170" cy="315" r="10" fill="#fff" cursor="pointer"/>
          <circle class="graph-point" data-idx="2" cx="220" cy="287" r="10" fill="#fff" cursor="pointer"/>
          <circle class="graph-point" data-idx="3" cx="320" cy="245" r="10" fill="#fff" cursor="pointer"/>
          <circle class="graph-point" data-idx="4" cx="470" cy="175" r="10" fill="#fff" cursor="pointer"/>
          <circle class="graph-point" data-idx="5" cx="600" cy="162" r="10" fill="#fff" cursor="pointer"/>
        </g>
        <!-- Labels années -->
        <text x="60" y="365" fill="#fff" font-size="13">2000</text>
        <text x="160" y="365" fill="#fff" font-size="13">2012</text>
        <text x="210" y="365" fill="#fff" font-size="13">2016</text>
        <text x="310" y="365" fill="#fff" font-size="13">2020</text>
        <text x="460" y="365" fill="#fff" font-size="13">2022</text>
        <text x="590" y="365" fill="#fff" font-size="13">2024</text>
        <text x="90" y="80" fill="#fff" font-size="15" opacity="0.85">
          L'évolution de la vente de vinyles en France
        </text>
      </svg>
      <!-- Fiche tooltip dynamique -->
      <div class="tooltip-fiche" id="tooltip-fiche" style="display:none;">
        <div class="pop-fiche">Cette année :</div>
        <div class="chiffre-fiche" id="chiffre-fiche">0,0M</div>
        <div class="pop-fiche">Vinyle populaire:</div>
        <div class="titre-fiche" id="titre-vinyle">Album/Artiste</div>
        <div class="annee-fiche" id="annee-fiche">Année</div>
        <img id="cover-fiche" src="" alt="cover" class="img-fiche" />
        <button class="btn-audio" id="btn-audio" onclick="event.stopPropagation(); document.getElementById('audio-fiche').play()">Écouter un extrait</button>
        <div class="volume-control">
        <label for="volume-slider" class="volume-label">Volume</label>
        <input type="range" id="volume-slider" class="volume-slider" min="0" max="1" step="0.02" value="0.5" aria-label="Contrôle du volume sonore" />
        </div>
        <audio id="audio-fiche" src="" controls style="display:none;"></audio>
      </div>

    </div>
    <div class="texte-graph" style="text-align:left; margin-left:0;">
      Le vinyle, longtemps oublié, s’est imposé comme le symbole d’un retour à l’authentique. <br><br>
      Depuis 2012, ses ventes ont été multipliées par près de six en France, culminant à plus de 5 millions d’unités vendues en 2024. <br>
      Ce succès s’explique par la recherche d’un son chaleureux, l’envie de collection et un effet générationnel inattendu : en valeur, le vinyle dépasse pour la première fois le CD depuis les années 80.
    </div>
  </div>
  <script>
  const vinylesData = [
    { annee: "2000", ventes: "0,2M", titre: "Michael Jackson – Invincible", cover: "img/jackson2000.jpg", extrait: "son/jackson2000.mp3" },
    { annee: "2012", ventes: "0,87M", titre: "Daft Punk – Discovery (réédition)", cover: "img/daftpunk2012.jpg", extrait: "son/daftpunk2012.mp3" },
    { annee: "2016", ventes: "1,8M", titre: "David Bowie – Blackstar", cover: "img/bowie2016.png", extrait: "son/bowie2016.mp3" },
    { annee: "2020", ventes: "4,5M", titre: "Billie Eilish – When We All Fall Asleep, Where Do We Go?", cover: "img/eilish2020.jpg", extrait: "son/eilish2020.mp3" },
    { annee: "2022", ventes: "5,0M", titre: "Orelsan – Civilisation", cover: "img/orelsan2022.jpg", extrait: "son/orelsan2022.mp3" },
    { annee: "2024", ventes: "5,1M", titre: "Taylor Swift – 1989 (Taylor's Version)", cover: "img/swift2024.jpg", extrait: "son/swift2024.mp3" },
  ];

  const points = document.querySelectorAll('.graph-point');
  const tooltip = document.getElementById('tooltip-fiche');
  const titreFiche = document.getElementById('titre-vinyle');
  const anneeFiche = document.getElementById('annee-fiche');
  const chiffreFiche = document.getElementById('chiffre-fiche');
  const coverFiche = document.getElementById('cover-fiche');
  const audioFiche = document.getElementById('audio-fiche');
  const btnAudio = document.getElementById('btn-audio');
  const volumeSlider = document.getElementById('volume-slider');



  let hovertooltip = false;
  let hideTimeout;
  let lecture = false;

  points.forEach((pt, idx) => {
    pt.addEventListener('mouseenter', function () {
      clearTimeout(hideTimeout);
      const data = vinylesData[idx];
      titreFiche.textContent = data.titre;
      anneeFiche.textContent = data.annee;
      chiffreFiche.textContent = "Ventes totales : " + data.ventes;
      coverFiche.src = data.cover;
      audioFiche.src = data.extrait;
      audioFiche.pause();
      lecture = false;
      tooltip.style.display = "block";

      const svg = document.getElementById('svg-vinyle');
      const ptSVG = svg.createSVGPoint();
      ptSVG.x = this.cx.baseVal.value;
      ptSVG.y = this.cy.baseVal.value;
      const screenCTM = svg.getScreenCTM();
      const pos = ptSVG.matrixTransform(screenCTM);

      tooltip.style.left = (pos.x - svg.getBoundingClientRect().left - 60) + "px";
      tooltip.style.top = (pos.y - svg.getBoundingClientRect().top - 135) + "px";
    });

    pt.addEventListener('mouseleave', function () {
      hideTimeout = setTimeout(() => {
        if (!hovertooltip) {
          tooltip.style.display = "none";
          audioFiche.pause();
          audioFiche.currentTime = 0;
          lecture = false;
          btnAudio.textContent = 'Écouter un extrait';
        }
      }, 300);
    });
  });

  tooltip.addEventListener('mouseenter', () => {
    hovertooltip = true;
    clearTimeout(hideTimeout);
  });

  tooltip.addEventListener('mouseleave', () => {
    hovertooltip = false;
    hideTimeout = setTimeout(() => {
      tooltip.style.display = "none";
      audioFiche.pause();
      audioFiche.currentTime = 0;
      lecture = false;
      btnAudio.textContent = 'Écouter un extrait';
    }, 300);
  });

  btnAudio.addEventListener('click', (e) => {
    e.stopPropagation();
    if (lecture) {
      audioFiche.pause();
      btnAudio.textContent = 'Écouter un extrait';
      lecture = false;
    } else {
      audioFiche.play();
      btnAudio.textContent = 'Pause';
      lecture = true;
    }

  volumeSlider.value = 0.5;
  audioFiche.volume = volumeSlider.value;

  volumeSlider.addEventListener('input', () => {
  audioFiche.volume = volumeSlider.value;
})
  });

  </script>
</section>


  <!-- SECTION 3 : Retour du vinyle aux États-Unis -->
  <section id="usa" class="section">
    <div class="container">
      <h2>Évolution des ventes de vinyles</h2>
      <!-- Graphique -->
      <div class="graph-placeholder">[Graphique USA à insérer ici]</div>
      <p>
        Découvrez comment les ventes de vinyles ont évolué au fil des années aux États-Unis.
        Là où l’industrie semblait tourner la page, le disque vinyle a retrouvé une voix puissante,
        redessinant le paysage musical américain.
      </p>
    </div>
  </section>

  <!-- SECTION 4 : Top 3 des vinyles 2024 -->
  <section id="top3" class="section">
    <div class="container">
      <h2>Top 3 des Vinyles les Plus Achetés en France en 2024</h2>
      <p>
        Entre rééditions cultes et nouveaux artistes, voici les trois vinyles qui ont marqué
        les platines françaises en 2024 :
      </p>
      <ol>
        <li><strong>1. </strong>À compléter – Artiste / Album</li>
        <li><strong>2. </strong>À compléter – Artiste / Album</li>
        <li><strong>3. </strong>À compléter – Artiste / Album</li>
      </ol>
    </div>
  </section>

  <!-- Footer avec mentions / sources / haut de page -->
  <footer id="footer">
    <div class="footer-links">
      <a href="mentions-legales.html">Mentions légales</a> |
      <a href="sources.html">Sources</a> |
      <a href="#accueil">Haut de page ▲</a>
    </div>
    <p class="copyright">
      © 2025 - DataGroove | Projet étudiant
    </p>
  </footer>

</body>
</html>
